#!/bin/bash
function_name=auna-dl-qa-prueba-file-validator_v2
# csv
# token='ew0KICAgICJSZWNvcmRzIjpbDQogICAgICAgew0KICAgICAgICAgICJldmVudFZlcnNpb24iOiIyLjAiLA0KICAgICAgICAgICJldmVudFNvdXJjZSI6ImF3czpzMyIsDQogICAgICAgICAgImF3c1JlZ2lvbiI6InVzLWVhc3QtMSIsDQogICAgICAgICAgImV2ZW50VGltZSI6IjE5NzAtMDEtMDFUMDA6MDA6MDAuMDAwWiIsDQogICAgICAgICAgImV2ZW50TmFtZSI6Ik9iamVjdENyZWF0ZWQ6UHV0IiwNCiAgICAgICAgICAidXNlcklkZW50aXR5Ijp7DQogICAgICAgICAgICAgInByaW5jaXBhbElkIjoiRVhBTVBMRSINCiAgICAgICAgICB9LA0KICAgICAgICAgICJyZXF1ZXN0UGFyYW1ldGVycyI6ew0KICAgICAgICAgICAgICJzb3VyY2VJUEFkZHJlc3MiOiIxMjcuMC4wLjEiDQogICAgICAgICAgfSwNCiAgICAgICAgICAicmVzcG9uc2VFbGVtZW50cyI6ew0KICAgICAgICAgICAgICJ4LWFtei1yZXF1ZXN0LWlkIjoiRVhBTVBMRTEyMzQ1Njc4OSIsDQogICAgICAgICAgICAgIngtYW16LWlkLTIiOiJFWEFNUExFMTIzLzU2NzhhYmNkZWZnaGlqa2xhbWJkYWlzYXdlc29tZS9tbm9wcXJzdHV2d3h5ekFCQ0RFRkdIIg0KICAgICAgICAgIH0sDQogICAgICAgICAgInMzIjp7DQogICAgICAgICAgICAgInMzU2NoZW1hVmVyc2lvbiI6IjEuMCIsDQogICAgICAgICAgICAgImNvbmZpZ3VyYXRpb25JZCI6InRlc3RDb25maWdSdWxlIiwNCiAgICAgICAgICAgICAiYnVja2V0Ijp7DQogICAgICAgICAgICAgICAgIm5hbWUiOiJhdW5hLWRsYXFhLWxhbmRpbmd6b25lLXMzIiwNCiAgICAgICAgICAgICAgICAib3duZXJJZGVudGl0eSI6ew0KICAgICAgICAgICAgICAgICAgICJwcmluY2lwYWxJZCI6IkVYQU1QTEUiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAiYXJuIjoiYXJuOmF3czpzMzo6OmF1bmEtZGxhcWEtbGFuZGluZ3pvbmUtczMiDQogICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAib2JqZWN0Ijp7DQogICAgICAgICAgICAgICAgImtleSI6Ik1vZGFtYS9kYXNoYm9hcmRfY2FuYWxlcy9yZW1vdG9fMS9BU0lTVEVOQ0lBLmNzdiIsDQogICAgICAgICAgICAgICAgInNpemUiOjEwMjQsDQogICAgICAgICAgICAgICAgImVUYWciOiIwMTIzNDU2Nzg5YWJjZGVmMDEyMzQ1Njc4OWFiY2RlZiIsDQogICAgICAgICAgICAgICAgInNlcXVlbmNlciI6IjBBMUIyQzNENEU1RjY3ODkwMSINCiAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgIH0NCiAgICBdDQogfQ0KDQog'

# xlsx
token='ew0KICAgICJSZWNvcmRzIjpbDQogICAgICAgew0KICAgICAgICAgICJldmVudFZlcnNpb24iOiIyLjAiLA0KICAgICAgICAgICJldmVudFNvdXJjZSI6ImF3czpzMyIsDQogICAgICAgICAgImF3c1JlZ2lvbiI6InVzLWVhc3QtMSIsDQogICAgICAgICAgImV2ZW50VGltZSI6IjE5NzAtMDEtMDFUMDA6MDA6MDAuMDAwWiIsDQogICAgICAgICAgImV2ZW50TmFtZSI6Ik9iamVjdENyZWF0ZWQ6UHV0IiwNCiAgICAgICAgICAidXNlcklkZW50aXR5Ijp7DQogICAgICAgICAgICAgInByaW5jaXBhbElkIjoiRVhBTVBMRSINCiAgICAgICAgICB9LA0KICAgICAgICAgICJyZXF1ZXN0UGFyYW1ldGVycyI6ew0KICAgICAgICAgICAgICJzb3VyY2VJUEFkZHJlc3MiOiIxMjcuMC4wLjEiDQogICAgICAgICAgfSwNCiAgICAgICAgICAicmVzcG9uc2VFbGVtZW50cyI6ew0KICAgICAgICAgICAgICJ4LWFtei1yZXF1ZXN0LWlkIjoiRVhBTVBMRTEyMzQ1Njc4OSIsDQogICAgICAgICAgICAgIngtYW16LWlkLTIiOiJFWEFNUExFMTIzLzU2NzhhYmNkZWZnaGlqa2xhbWJkYWlzYXdlc29tZS9tbm9wcXJzdHV2d3h5ekFCQ0RFRkdIIg0KICAgICAgICAgIH0sDQogICAgICAgICAgInMzIjp7DQogICAgICAgICAgICAgInMzU2NoZW1hVmVyc2lvbiI6IjEuMCIsDQogICAgICAgICAgICAgImNvbmZpZ3VyYXRpb25JZCI6InRlc3RDb25maWdSdWxlIiwNCiAgICAgICAgICAgICAiYnVja2V0Ijp7DQogICAgICAgICAgICAgICAgIm5hbWUiOiJhdW5hLWRsYXFhLWxhbmRpbmd6b25lLXMzIiwNCiAgICAgICAgICAgICAgICAib3duZXJJZGVudGl0eSI6ew0KICAgICAgICAgICAgICAgICAgICJwcmluY2lwYWxJZCI6IkVYQU1QTEUiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAiYXJuIjoiYXJuOmF3czpzMzo6OmF1bmEtZGxhcWEtbGFuZGluZ3pvbmUtczMiDQogICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAib2JqZWN0Ijp7DQogICAgICAgICAgICAgICAgImtleSI6Ik1vZGFtYS9kYXNoYm9hcmRfY2FuYWxlcy90ZWxlbWFya2V0aW5nL09CSkVUSVZPU19OSVZFTC54bHN4IiwNCiAgICAgICAgICAgICAgICAic2l6ZSI6MTAyNCwNCiAgICAgICAgICAgICAgICAiZVRhZyI6IjAxMjM0NTY3ODlhYmNkZWYwMTIzNDU2Nzg5YWJjZGVmIiwNCiAgICAgICAgICAgICAgICAic2VxdWVuY2VyIjoiMEExQjJDM0Q0RTVGNjc4OTAxIg0KICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgfQ0KICAgIF0NCiB9DQoNCiA='
aws lambda invoke --function-name $function_name --payload $token out
LOG_GROUP=/aws/lambda/$function_name
MSYS_NO_PATHCONV=1 aws logs tail $LOG_GROUP --follow
# sed -i'' -e 's/"//g' out
# echo $out
# sleep 15
# MSYS_NO_PATHCONV=1 aws logs get-log-events --log-group-name /aws/lambda/auna-dl-qa-prueba-file-validator_v2 --log-stream-name stream1 --limit 5